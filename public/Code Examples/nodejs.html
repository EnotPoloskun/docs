
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Node.js - SendGrid Documentation - Email Delivery. Simplified.</title>
  <meta name="author" content="SendGrid">

  
  <meta name="description" content="Docs Home Overview	API Reference API Libraries SMTP API Apps (Filters) Categories SMTP API Overview Section Tags Substitution Tags Unique Arguments &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://docs.sendgrid.com/Code Examples/nodejs.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/bootstrap/bootstrap.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/bootstrap/responsive.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/sprites.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/syntax/syntax.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/style.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/libs/jquery.js"></script>
  <script src="/javascripts/collapse.min.js"></script>
  <script src="/javascripts/libs/jstorage.js"></script>
  <script src="/javascripts/menu.js"></script>
  <script src="/javascripts/libs/modernizr-2.0.js"></script>
  <script src="/javascripts/libs/bootstrap.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="SendGrid Documentation - Email Delivery. Simplified." type="application/atom+xml">
  
  

</head>

<body   >

  <div class="main-container container">  
  <div class="container" id="header-wrap">
	<div class="row" id="header">
		<div id="logo">
			<a href="http://sendgrid.com/blog"><img src="/images/sendgrid-logo.png"/></a>
		</div>
		
		  <form class="pull-right navbar-search" action="http://google.com/search" method="get">
			<input type="hidden" name="q" value="site:docs.sendgrid.com" />
			<input class="search-query span3"name="q" results="0" placeholder="Search"/a>
	      </form>
		
	</div>
	<div class="row menu">
	<ul id="main-menu" class="nav nav-tabs">
		<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
			<a href="/">Docs Home</a>
		</li>
		<li class="menu-item menu-item-type-custom menu-item-object-custom">
			<a href="/API Workshop/index.html">API Workshop</a>
		</li>
		<li class="menu-item menu-item-type-custom menu-item-object-custom">
			<a href="http://sendgrid.com/features.html">Community</a>
		</li>
	</ul>
</div>
</div>

    <div class="row-fluid" id="content">
      
<aside class="sidebar-nav span3">
    <ul id="nav-menu" class="nav nav-list">	 <li class=><a href="/index.html">Docs Home</a></li>	 <li class=><a href="/overview.html">Overview</a></li>	<li class=""><div class="subtree-name">API Reference</div>	 <ul id="nav-menu" class="nav nav-list">	 	 <li class=><a href="/API Reference/libraries.html">API Libraries</a></li>	 	<li class=""><div class="subtree-name">SMTP API</div>	 	 <ul id="nav-menu" class="nav nav-list">	 	 	 <li class=><a href="/API Reference/SMTP API/apps.html">Apps (Filters)</a></li>	 	 	 <li class=><a href="/API Reference/SMTP API/categories.html">Categories</a></li>	 	 	 <li class=><a href="/API Reference/SMTP API/index.html">SMTP API Overview</a></li>	 	 	 <li class=><a href="/API Reference/SMTP API/section_tags.html">Section Tags</a></li>	 	 	 <li class=><a href="/API Reference/SMTP API/substitution_tags.html">Substitution Tags</a></li>	 	 	 <li class=><a href="/API Reference/SMTP API/unique_arguments.html">Unique Arguments</a></li>	 	  </ul></li>	 	<li class=""><div class="subtree-name">Webhooks</div>	 	 <ul id="nav-menu" class="nav nav-list">	 	 	 <li class=><a href="/API Reference/Webhooks/event.html">Event</a></li>	 	 	 <li class=><a href="/API Reference/Webhooks/parse.html">Inbound Parse</a></li>	 	  </ul></li>	  </ul></li>	<li class=""><div class="subtree-name">API Workshop</div>	 <ul id="nav-menu" class="nav nav-list">	 	 <li class=><a href="/API Workshop/index.html">API Workshop</a></li>	  </ul></li>	<li class=""><div class="subtree-name">Apps</div>	 <ul id="nav-menu" class="nav nav-list">	 	 <li class=><a href="/Apps/address_whitelisting.html">Address Whitelisting</a></li>	 	 <li class=><a href="/Apps/bcc.html">BCC</a></li>	 	 <li class=><a href="/Apps/bypass_list_management.html">Bypass List Management</a></li>	 	 <li class=><a href="/Apps/click_tracking.html">Click Tracking</a></li>	 	 <li class=><a href="/Apps/dkim.html">DKIM</a></li>	 	 <li class=><a href="/Apps/domain_keys.html">Domain Keys</a></li>	 	 <li class=><a href="/Apps/email_templates.html">Email Templates</a></li>	 	 <li class=><a href="/Apps/event_notification.html">Event Notification</a></li>	 	 <li class=><a href="/Apps/footer.html">Footer</a></li>	 	 <li class=><a href="/Apps/forward_spam.html">Forward Spam</a></li>	 	 <li class=><a href="/Apps/google_analytics.html">Google Analytics</a></li>	 	 <li class=><a href="/Apps/gravatar.html">Gravatar</a></li>	 	 <li class=><a href="/Apps/index.html">Apps Overview</a></li>	 	 <li class=><a href="/Apps/open_tracking.html">Open Tracking</a></li>	 	 <li class=><a href="/Apps/return_path_seedlist.html">Return Path Seedlist</a></li>	 	 <li class=><a href="/Apps/spam_checker.html">Spam Checker</a></li>	 	 <li class=><a href="/Apps/subscription_tracking.html">Subscription Tracking</a></li>	  </ul></li>	<li class="collapsibleListClosed"><div class="subtree-name">Code Examples</div>	 <ul id="nav-menu" class="nav nav-list">	 	 <li class=><a href="/Code Examples/csharp.html">C#</a></li>	 	 <li class=><a href="/Code Examples/java.html">Java</a></li>	 	 <li class=active><a href="/Code Examples/nodejs.html">Node.js</a></li>	 	 <li class=><a href="/Code Examples/perl.html">Perl</a></li>	 	 <li class=><a href="/Code Examples/php.html">PHP</a></li>	 	 <li class=><a href="/Code Examples/python.html">Python</a></li>	 	 <li class=><a href="/Code Examples/ruby.html">Ruby</a></li>	  </ul></li>	<li class=""><div class="subtree-name">Delivery Metrics</div>	 <ul id="nav-menu" class="nav nav-list">	 	 <li class=><a href="/Delivery Metrics/alerts.html">Alerts</a></li>	 	 <li class=><a href="/Delivery Metrics/categories.html">Categories</a></li>	 	 <li class=><a href="/Delivery Metrics/email_activity.html">Email Activity</a></li>	 	 <li class=><a href="/Delivery Metrics/email_error_messages.html">Email Error Messages</a></li>	 	 <li class=><a href="/Delivery Metrics/email_reports.html">Email Reports</a></li>	 	 <li class=><a href="/Delivery Metrics/index.html">Delivery Metrics</a></li>	  </ul></li>	<li class=""><div class="subtree-name">Integrate</div>	 <ul id="nav-menu" class="nav nav-list">	 	<li class=""><div class="subtree-name">Frameworks</div>	 	 <ul id="nav-menu" class="nav nav-list">	 	 	 <li class=><a href="/Integrate/Frameworks/cakephp.html">CakePHP</a></li>	 	 	 <li class=><a href="/Integrate/Frameworks/codeigniter.html">CodeIgniter</a></li>	 	 	 <li class=><a href="/Integrate/Frameworks/django.html">Django</a></li>	 	 	 <li class=><a href="/Integrate/Frameworks/nodejs.html">Node.js</a></li>	 	 	 <li class=><a href="/Integrate/Frameworks/rubyonrails.html">Ruby on Rails</a></li>	 	 	 <li class=><a href="/Integrate/Frameworks/symfony.html">Symfony</a></li>	 	  </ul></li>	 	<li class=""><div class="subtree-name">Mail Clients</div>	 	 <ul id="nav-menu" class="nav nav-list">	 	 	 <li class=><a href="/Integrate/Mail Clients/applemail.html">Apple Mail</a></li>	 	 	 <li class=><a href="/Integrate/Mail Clients/gmail.html">Gmail / Google Apps</a></li>	 	 	 <li class=><a href="/Integrate/Mail Clients/outlook.html">Outlook 2007</a></li>	 	 	 <li class=><a href="/Integrate/Mail Clients/thunderbird.html">Thunderbird</a></li>	 	  </ul></li>	 	<li class=""><div class="subtree-name">Mail Servers</div>	 	 <ul id="nav-menu" class="nav nav-list">	 	 	 <li class=><a href="/Integrate/Mail Servers/exim.html">Exim</a></li>	 	 	 <li class=><a href="/Integrate/Mail Servers/iis75.html">Microsoft IIS 7.5</a></li>	 	 	 <li class=><a href="/Integrate/Mail Servers/postfix.html">Postfix</a></li>	 	 	 <li class=><a href="/Integrate/Mail Servers/qmail.html">Qmail</a></li>	 	 	 <li class=><a href="/Integrate/Mail Servers/sendmail.html">Sendmail</a></li>	 	 	 <li class=><a href="/Integrate/Mail Servers/ssmtp.html">ssmtp</a></li>	 	  </ul></li>	 	<li class=""><div class="subtree-name">Open Source Apps</div>	 	 <ul id="nav-menu" class="nav nav-list">	 	 	 <li class=><a href="/Integrate/Open Source Apps/drupal.html">Drupal</a></li>	 	 	 <li class=><a href="/Integrate/Open Source Apps/joomla.html">Joomla</a></li>	 	 	 <li class=><a href="/Integrate/Open Source Apps/magento.html">Magento</a></li>	 	 	 <li class=><a href="/Integrate/Open Source Apps/phpbb.html">phpBB</a></li>	 	 	 <li class=><a href="/Integrate/Open Source Apps/wordpress.html">WordPress</a></li>	 	  </ul></li>	  </ul></li> </ul>
<br/>

</aside>



<article role="article" class="span9">

  <ul class="breadcrumb"><li><a href="/">Documentation</a><span class="divider">/</span></li><li><a href="/Code Examples/">Code Examples</a><span class="divider">/</span></li><li>Node.js</li></ul>
  
  <header class="page-header">
    <h1 class="entry-title">Node.js</h1>
    
  </header>
  
  <p>If you are using Node.js and would like to send email through SendGrid, use the SendGrid nodejs module.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>npm install sendgrid-nodejs</span></code></pre></td></tr></table></div></figure>

<p>Once you have the module installed, it can be as simple as the following code snippet, modified to your specifics, of course:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">SendGrid</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;sendgrid&#39;</span><span class="p">).</span><span class="nx">SendGrid</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">sendgrid</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SendGrid</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="nx">key</span><span class="p">);</span>
</span><span class='line'><span class="nx">sendgrid</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">to</span><span class="o">:</span> <span class="s1">&#39;example@example.com&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">from</span><span class="o">:</span> <span class="s1">&#39;other@example.com&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">subject</span><span class="o">:</span> <span class="s1">&#39;Hello World&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;My first email through SendGrid&#39;</span>
</span><span class='line'><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">success</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>

<h3>Digging In Deeper</h3>
<p>Email is the object that will help you easily prepare your message to be sent.</p>

<p><span class="label label-info">Info</span> Anything that is available in the Email constructor is available for use in both the sendgrid.send and sendgrid.smtp functions.</p>

<p>To get started create an Email object:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">Email</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;sendgrid&#39;</span><span class="p">).</span><span class="nx">Email</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">(</span><span class="nx">optionalParams</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>

<p>You can pass in as many or as few optionalParams as you want, as the email object has methods for manipulating all of the data.</p>

<p>Here is how the parameters are structured:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">optionalParams</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">to</span><span class="o">:</span> <span class="p">[],</span>
</span><span class='line'>  <span class="nx">from</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">smtpapi</span><span class="o">:</span> <span class="k">new</span> <span class="nx">SmtpapiHeaders</span><span class="p">(),</span>
</span><span class='line'>  <span class="nx">subject</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">html</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">bcc</span><span class="o">:</span> <span class="p">[],</span>
</span><span class='line'>  <span class="nx">replyto</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">date</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span>
</span><span class='line'>  <span class="nx">files</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>          <span class="c1">// required only if file.content is used.</span>
</span><span class='line'>      <span class="nx">contentType</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>       <span class="c1">// optional</span>
</span><span class='line'>      <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>              <span class="c1">//</span>
</span><span class='line'>      <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>               <span class="c1">// == One of these three options is required</span>
</span><span class='line'>      <span class="nx">content</span><span class="o">:</span> <span class="p">(</span><span class="s1">&#39;&#39;</span> <span class="o">|</span> <span class="nx">Buffer</span><span class="p">)</span> <span class="c1">//</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">],</span>
</span><span class='line'>  <span class="nx">file_data</span><span class="o">:</span> <span class="p">{},</span>
</span><span class='line'>  <span class="nx">headers</span><span class="o">:</span> <span class="p">{}</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>

<p>And here is a sample for using it:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">to</span><span class="o">:</span> <span class="s1">&#39;walks.it.in@sample.com&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">from</span><span class="o">:</span> <span class="s1">&#39;arsenal@sample.com&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">subject</span><span class="o">:</span> <span class="s1">&#39;What was Wenger thinking sending Walcott on that early?&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;Did you see that ludicrous display last night?&#39;</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>

<h3>Setting data</h3>
<p>Here is an example of all of the functions available on the email object. The comments to the right show the current state of the variables as the functions are called.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">to</span><span class="o">:</span> <span class="s1">&#39;denim@sample.com&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">from</span><span class="o">:</span> <span class="s1">&#39;roy@sample.com&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">subject</span><span class="o">:</span> <span class="s1">&#39;Listen&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;Have you tried turning it off and on again&#39;</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>

<p>The following examples update the &#8216;x-smtpapi&#8217; headers:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="cm">/* To Addresses */</span>
</span><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">addTo</span><span class="p">(</span><span class="s1">&#39;moo@cow.com&#39;</span><span class="p">);</span>       <span class="c1">// to = [&#39;moo@cow.com&#39;]</span>
</span><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">addTo</span><span class="p">([</span><span class="s1">&#39;solid@snake.com&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s1">&#39;liquid@snake.com&#39;</span><span class="p">]);</span> <span class="c1">// to = [&#39;moo@cow.com&#39;, &#39;solid@snake.com&#39;, &#39;liquid@snake.com&#39;]</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* Custom Email Headers */</span>
</span><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">setHeaders</span><span class="p">({</span><span class="nx">full</span><span class="o">:</span> <span class="s1">&#39;hearts&#39;</span><span class="p">});</span>   <span class="c1">// headers = {full: &#39;hearts&#39;}</span>
</span><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">addHeaders</span><span class="p">({</span><span class="nx">spin</span><span class="o">:</span> <span class="s1">&#39;attack&#39;</span><span class="p">});</span>   <span class="c1">// headers = {full: &#39;hearts&#39;, spin: &#39;attack&#39;}</span>
</span><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">setHeaders</span><span class="p">({</span><span class="nx">mask</span><span class="o">:</span> <span class="s1">&#39;salesman&#39;</span><span class="p">});</span> <span class="c1">// headers = {mask: &#39;salesman&#39;}</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* Substitution */</span>
</span><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">addSubVal</span><span class="p">(</span><span class="s1">&#39;keep&#39;</span><span class="p">,</span> <span class="s1">&#39;secret&#39;</span><span class="p">);</span> <span class="c1">// sub = {keep: [&#39;secret&#39;]}</span>
</span><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">addSubVal</span><span class="p">(</span><span class="s1">&#39;keep&#39;</span><span class="p">,</span> <span class="s1">&#39;safe&#39;</span><span class="p">);</span>   <span class="c1">// sub = {keep: [&#39;secret&#39;, &#39;safe&#39;]}</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* Section */</span>
</span><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">setSection</span><span class="p">({</span><span class="s1">&#39;-charge-&#39;</span><span class="o">:</span> <span class="s1">&#39;This ship is useless.&#39;</span><span class="p">});</span> <span class="c1">// section = {&#39;-charge-&#39;: &#39;This ship is useless.&#39;}</span>
</span><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">addSection</span><span class="p">({</span><span class="s1">&#39;-bomber-&#39;</span><span class="o">:</span> <span class="s1">&#39;Only for sad vikings.&#39;</span><span class="p">});</span> <span class="c1">// section = {&#39;-charge-&#39;: &#39;This ship is useless.&#39;,&#39;-bomber-&#39;: &#39;Only for sad vikings.&#39;}</span>
</span><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">setSection</span><span class="p">({</span><span class="s1">&#39;-beam-&#39;</span><span class="o">:</span> <span class="s1">&#39;The best is for first&#39;</span><span class="p">});</span>   <span class="c1">// section = {&#39;-beam-&#39;: &#39;The best is for first&#39;}</span>
</span></code></pre></td></tr></table></div></figure>

<p>Setting unique arguments allows you to get more mojo out of your statistics:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">setUniqueArgs</span><span class="p">({</span><span class="nx">cow</span><span class="o">:</span> <span class="s1">&#39;chicken&#39;</span><span class="p">});</span> <span class="c1">// unique_args = {cow: &#39;chicken&#39;}</span>
</span><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">addUniqueArgs</span><span class="p">({</span><span class="nx">cat</span><span class="o">:</span> <span class="s1">&#39;dog&#39;</span><span class="p">});</span>     <span class="c1">// unique_args = {cow: &#39;chicken&#39;, cat: &#39;dog&#39;}</span>
</span><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">setUniqueArgs</span><span class="p">({</span><span class="nx">dad</span><span class="o">:</span> <span class="s1">&#39;proud&#39;</span><span class="p">});</span>   <span class="c1">// unique_args = {dad: &#39;proud&#39;}</span>
</span></code></pre></td></tr></table></div></figure>

<p>You can set categories with the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">setCategory</span><span class="p">(</span><span class="s1">&#39;tactics&#39;</span><span class="p">);</span>        <span class="c1">// category = [&#39;tactics&#39;]</span>
</span><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">addCategory</span><span class="p">(</span><span class="s1">&#39;advanced&#39;</span><span class="p">);</span>       <span class="c1">// category = [&#39;tactics&#39;, &#39;advanced&#39;]</span>
</span><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">setCategory</span><span class="p">(</span><span class="s1">&#39;snowball-fight&#39;</span><span class="p">);</span> <span class="c1">// category = [&#39;snowball-fight&#39;]</span>
</span></code></pre></td></tr></table></div></figure>

<p>You can set a filter using an object literal:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">setFilterSetting</span><span class="p">({</span>
</span><span class='line'>  <span class="s1">&#39;footer&#39;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="s1">&#39;setting&#39;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="s1">&#39;enable&#39;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;text/plain&#39;</span><span class="o">:</span> <span class="s1">&#39;You can haz footers!&#39;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>

<p>Alternatively, you can add filter settings one at a time.
</p>
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">addFilterSetting</span><span class="p">(</span><span class="s1">&#39;footer&#39;</span><span class="p">,</span> <span class="s1">&#39;enable&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">addFilterSetting</span><span class="p">(</span><span class="s1">&#39;footer&#39;</span><span class="p">,</span> <span class="s1">&#39;text/html&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;strong&gt;boo&lt;/strong&gt;&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>

<p>You can add files as attachments directly from content stored in memory, like so:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">addFile</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;secret.txt&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">content</span><span class="o">:</span>  <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="s1">&#39;You will never know....&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>

<p>Alternately, you can include files from a remote URL and will attempt to determine the file type based on the filename:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">addFile</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;icon.jpg&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://i.imgur.com/2fDh8.jpg&#39;</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>

<p>Finally, you can add file from a path on the server&#8217;s local filesystem, also attempting to determine the filetype via the filename:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">email</span><span class="p">.</span><span class="nx">addFile</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;../files/resume.txt&#39;</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>

<h3>Testing Your Code</h3>
<p>Tests located in the <em>test/lib</em> folder can be ran as-is and should all pass if your code is valid. Tests that are located in the <em>test/intergration</em> folder require valid SendGrid account credentials inserted into <em>test/test.setup</em> in order to run.</p>

<span class="label label-info">Info</span> Running tests requires a valid SendGrid account and will consume credits

<p>When you&#8217;re ready, you can run your tests with this command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">make</span> <span class="nx">test</span>
</span></code></pre></td></tr></table></div></figure>

<p>You can run individual tests:</p>
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">mocha</span> <span class="o">/</span><span class="nx">path</span><span class="o">/</span><span class="nx">to</span><span class="o">/</span><span class="nx">test</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">js</span>
</span></code></pre></td></tr></table></div></figure>
  
    <footer>
      
      
        <div class="sharing">
  
  
  
</div>

      
      
    </footer>
  
</article>


    </div>
  </div>
	<div id="footer">
	<div class="container-fluid footer-links">
	<div class="container">
		<div class="row">
			<div class="span2">
				<h4>Sales</h4>
				<a href="http://sendgrid.com/pricing/">Pricing</a><br/>
				<a href="http://sendgrid.com/features/">Features</a>
			</div>
			<div class="span2">
				<h4>Support</h4>
				<a href="http://support.sendgrid.com/">Contact Support</a><br/>
				<a href="http://docs.sendgrid.com/">Documentation</a><br/>
				<a href="http://sendgrid.com/contact/reportSpam">Report Spam</a>
			</div>
			<div class="span2">
				<h4>Community</h4>
				<a href="http://twitter.com/sendgrid/">Twitter</a><br/>
				<a href="http://community.sendgrid.com/">Forum</a>
			</div>
			<div class="span2">
				<h4>Company</h4>
				<a href="http://http://sendgrid.com/about.html">About</a><br/>
				<a href="http://sendgrid.com/team.html">Our Team</a><br/>
				<a href="http://sendgrid.com/jobs.html">Jobs</a><br/>
				<a href="http://sendgrid.com/press.html">Press</a><br/>
				<a href="http://sendgrid.com/contact.html">Contact Us</a>
			</div>
			<div class="span2">
				<h4>Connect With Us!</h4>
				<a href="http://blog.sendgrid.com/feed/"><img alt="RSS" title="Feed" src="/images/rss.gif"></a> 
		          <a href="http://twitter.com/SendGrid"><img alt="Twitter" title="Twitter" src="/images/twitter.gif"></a> 
		          <a href="http://www.facebook.com/SendGrid"><img alt="Facebook" title="Facebook" src="/images/facebook.gif"></a>

			</div>
		</div>
	</div>
	</div>

	<footer id="bottom-footer">
	<div class="container">
		<div class="row">
			<div class="span5">
	        	<p>&copy; SendGrid 2012</p>
			</div>

			<div class="span7">
				<a href="http://sendgrid.com/tos.html">Terms of Service</a>

				<a href="http://sendgrid.com/tos.html">Email Policy</a>

				<a href="http://sendgrid.com/tos.html">Privacy Policy</a>

				<p class="pull-right"><a href="#">Back to top</a></p>
			</div>
		</div>
	</div> <!-- /container -->
	</footer>
</div>

	<!-- 







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




-->
</body>
</html>
