
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Multiple Credentials - SendGrid Documentation - Email Delivery. Simplified.</title>
  <meta name="author" content="SendGrid">

  
  <meta name="description" content="Liquid error: undefined method `[]' for nil:NilClass Liquid error: undefined method `[]' for nil:NilClass Multiple Credentials The permissions for &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://docs.sendgrid.com/API Reference/Web API/multiple_credentials.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/bootstrap/bootstrap.css" media="screen, projection" rel="stylesheet" type="text/css">
  
  <link href="/stylesheets/bootstrap/responsive.css" media="screen, projection" rel="stylesheet" type="text/css">
  
  
  <link href="/stylesheets/sprites.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/syntax/syntax.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/style.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/libs/jquery.js"></script>
  <script src="/javascripts/collapse.min.js"></script>
  <script src="/javascripts/libs/jstorage.js"></script>
  <script src="/javascripts/menu.js"></script>
  <script src="/javascripts/libs/modernizr-2.0.js"></script>
  <script src="/javascripts/libs/bootstrap.js"></script>
  <script src="/javascripts/libs/bootstrap-tabs.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="SendGrid Documentation - Email Delivery. Simplified." type="application/atom+xml">
  
  

</head>

<body   >

  <div class="main-container container">  
  <div class="container" id="header-wrap">
	<div class="row" id="header">
		<div id="logo">
			<a href="http://sendgrid.com/blog"><img src="/images/sendgrid-logo.png"/></a>
		</div>
		
		  <form class="pull-right navbar-search" action="http://google.com/search" method="get">
			<input type="hidden" name="q" value="site:docs.sendgrid.com" />
			<input class="search-query span3"name="q" results="0" placeholder="Search"/a>
	      </form>
		
	</div>
	<div class="row menu">
	<ul id="main-menu" class="nav nav-tabs">
		<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
			<a href="/">Docs Home</a>
		</li>
		<li class="menu-item menu-item-type-custom menu-item-object-custom">
			<a href="/API Workshop/index.html">API Workshop</a>
		</li>
		<li class="menu-item menu-item-type-custom menu-item-object-custom">
			<a href="http://sendgrid.com/features.html">Community</a>
		</li>
	</ul>
</div>
</div>

	
    <div class="row-fluid" id="content">
	
      
<aside class="sidebar-nav span3">
    Liquid error: undefined method `[]' for nil:NilClass
<br/>

</aside>



<article role="article" class="span9">

  Liquid error: undefined method `[]' for nil:NilClass
  
  <header class="page-header">
    <h1 class="entry-title">Multiple Credentials</h1>
    
  </header>
  
  <p>The permissions for each set of credentials are added using a simple JSON structure. There are three key names: email for access to SMTP, api for programmatic access, and web for administration. The values are either 0 for off or 1 for on. There are some limitations to the access, however.</p>

	<ul>	<li>Granting access to the APIs but not to sending mail will block the credentials from being able to use APIs to send messages.</li>
		<li>Granting access rights cannot exceed the rights level that is associated with the primary account holder. In other words, a set of credentials cannot do more than the primary account holder.</li>
	</ul>

<p>	The following example allows the specified username/password to log into the dashboard, but <em>not</em> send email or have access to any of the APIs:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span><span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;web&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;api&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

	<h1>Parameters And Values</h1>

 <table class="table table-bordered table-striped">
    <tbody>
      <!--TABLE HEADER-->

      <tr class="odd">
        <th>Parameter</th>

        <th>Value</th>

        <th>Notes</th>
      </tr>

      <tr class="even">
        <td>api_user</td>

        <td>alphanumeric</td>

        <td>The primary account holder&#8217;s user ID creating the new
        account</td>
      </tr>

      <tr class="odd">
        <td>api_key</td>

        <td>alphanumeric</td>

        <td>The primary account holder&#8217;s password</td>
      </tr>

      <tr class="even">
        <td>username</td>

        <td>alphanumeric</td>

        <td>Enter a username for the new account</td>
      </tr>

      <tr class="odd">
        <td>password</td>

        <td>alphanumeric</td>

        <td>Enter a password for the new account</td>
      </tr>

      <tr class="even">
        <td>email</td>

        <td>0/1</td>

        <td>0 = off, 1 = on</td>
      </tr>

      <tr class="odd">
        <td>api</td>

        <td>0/1</td>

        <td>0 = off, 1 = on</td>
      </tr>

      <tr class="even">
        <td>web</td>

        <td>0/1</td>

        <td>0 = off, 1 = on</td>
      </tr>
    </tbody>
  </table>

	<h2>Adding New Credentials</h2>

	<p>To add a new set of credentials to your account, the following syntax is required in a JSON string:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">/api/credentials/add.json?username=name&amp;password=password&amp;permissions=JSON</span>
</span></code></pre></td></tr></table></div></figure>

	<p>Depending on what you send out, you&#8217;ll get one of the following return codes:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;success&quot;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="o">:</span> <span class="s2">&quot;error reason&quot;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>
<p>If you use $ curl, your string may look something like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -d <span class="s2">&quot;api_user=MASTERACCOUNTUSERNAME&amp;api_key=MASTERACCOUNTPASSWORD&amp;username=NEWUSERNAME&amp;password=NEWPASSWORD&amp;permissions=%7B%22email%22%3A0,%22web%22%3A1%7D&quot;&quot;https://sendgrid.com/api/credentials/add.json&quot;</span>
</span></code></pre></td></tr></table></div></figure>
<p>	Notice in this example that we&#8217;re passing the master account credentials in the API call as MASTERACCOUNTUSERNAME and MASTERACCOUNTPASSWORD. NEWUSERNAME and NEWPASSWORD are the new credentials you wish to add, and the &#8216;permissions&#8217; attribute is an html-encoded representation of the following JSON:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span><span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;web&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

	<blockquote><span class="label label-info">Info</span> Excluding a parameter is the same as granting access rights. In other words, if you do not specify email, web or api at all, the new credentials will have access to all three. If you do not want the credentials to have access to email, web, or api, you <em>must explicitly set those parameter options to zeroes</em>.</blockquote>

	<h2>Editing Existing Credentials</h2>

	<p>You can edit an account you have already created, like so:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">/api/credentials/edit.json?username=name&amp;password=password&amp;permissions=JSON</span>
</span></code></pre></td></tr></table></div></figure>

<p>	In order to locate the account, you must specify the USERNAME parameter. You don&#8217;t have to specify the PASSWORD parameter unless you are going to change the specified user&#8217;s password. If you do not specify any additional parameters (i.e., email, web, api), then no permissions will be changed. This behavior allows you to change passwords without having to lookup the current applied permissions.</p>

	<p>Depending on what you send out, you&#8217;ll get one of the following return codes:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;success&quot;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="o">:</span> <span class="s2">&quot;error reason&quot;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

	<p>To use $ curl to modify the existing account, your string may look like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -d <span class="s2">&quot;api_user=MASTERACCOUNTUSERNAME&amp;api_key=MASTERACCOUNTPASSWORD&amp;username=OLDUSERNAME&amp;password=NEWPASSWORD&amp;permissions=%7B%22email%22%3A1,%22web%22%3A0%7D&quot;&quot;https://sendgrid.com/api/credentials/add.json&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>	Now, in this example that we&#8217;re passing the master account credentials in the API call as MASTERACCOUNTUSERNAME and MASTERACCOUNTPASSWORD. The OLDUSERNAME value is simply to find the previous credentials, and cannot be changed. NEWPASSWORD is the new password you&#8217;d like to set, and the &#8216;permissions&#8217; attribute is an html-encoded representation of the following JSON:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span><span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="mi">1</span> <span class="p">,</span> <span class="s2">&quot;web&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

	<h2>Fetching Existing Credentials</h2>

<p>	On occasion, you may find it beneficial to have a list of credentials and their associated permissions you have in your account displayed so that you might peruse the contents. In order to do so, you would pass the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">/api/credentials/get.json?username=name</span>
</span></code></pre></td></tr></table></div></figure>

	<table class="table table-bordered table-striped">
		<tbody>
			<tr>
				<th>Parameters</th>
				<th>Notes</th>
			</tr>
			<tr>
				<td>username</td>
				<td>credential username, <strong>optional</strong></td>
			</tr>
		</tbody>
	</table>
	<p>If a username is supplied, it returns the JSON permissions for that user in a manner something like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;johnsmith&quot;</span><span class="p">,</span> <span class="nx">permissions</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;api&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">}}</span>
</span></code></pre></td></tr></table></div></figure>

<p>	If, on the other hand, no username is supplied, the request returns a JSON list for all credentials for your account, like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;johnsmith&quot;</span><span class="p">,</span> <span class="nx">permissions</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;api&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">}},</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mi">15</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;joewrigley&quot;</span><span class="p">,</span> <span class="nx">permissions</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;web&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;api&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">}}]</span>
</span></code></pre></td></tr></table></div></figure>

	<p>If it fails, however, you will see this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span><span class="s2">&quot;error&quot;</span> <span class="o">:</span> <span class="s2">&quot;error reason&quot;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

	<p>Example using $ curl:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -d <span class="s2">&quot;api_user=MASTERACCOUNTUSERNAME&amp;api_key=MASTERACCOUNTPASSWORD&quot;</span> <span class="s2">&quot;https://sendgrid.com/api/credentials/get.json&quot;</span>
</span></code></pre></td></tr></table></div></figure>

	<p>In this example we&#8217;re passing the master account credentials in the API call as MASTERACCOUNTUSERNAME and MASTERACCOUNTPASSWORD. Since we are not passing the &#8216;username&#8217; parameter, a JSON list of any existing credentials will be returned, similar to the documentation above, like so:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -d <span class="s2">&quot;api_user=MASTERACCOUNTUSERNAME&amp;api_key=MASTERACCOUNTPASSWORD&amp;username=johnsmith&quot;&quot;https://sendgrid.com/api/credentials/get.json&quot;</span>
</span></code></pre></td></tr></table></div></figure>

<p>	Finally, in this example we&#8217;re passing the master account credentials in the API call as MASTERACCOUNTUSERNAME and MASTERACCOUNTPASSWORD. By including the &#8216;username&#8217; parameter, we can retrieve the corresponding JSON permissions.</p>

	<h2>Removing Credentials</h2>

<p>	Finally, someone may be moving up the corporate ladder, and no longer require credentials, at which point you would want to remove their account so as to prevent potential misuse. To do that, you would pass the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>/api/credentials/remove.json?username<span class="o">=</span>name
</span></code></pre></td></tr></table></div></figure>

	<table class="table table-bordered table-striped">
		<tbody>
			<tr>
				<th>Parameters</th>
				<th>Notes</th>
			</tr>
			<tr>
				<td>username</td>
				<td>Provided for lookup, <strong>required</strong></td>
			</tr>
		</tbody>
	</table>

	
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;success&quot;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="o">:</span> <span class="s2">&quot;error reason&quot;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

	<p>Example using $ curl:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -d <span class="s2">&quot;api_user=MASTERACCOUNTUSERNAME&amp;api_key=MASTERACCOUNTPASSWORD&amp;username=johnsmith&quot;&quot;https://sendgrid.com/api/credentials/remove.json&quot;&quot;&lt;/code&gt;&quot;</span>
</span></code></pre></td></tr></table></div></figure>
	<p>This example illustrates that we&#8217;re passing the master account credentials in the API call as MASTERACCOUNTUSERNAME and MASTERACCOUNTPASSWORD. If the lookup for &#8216;johnsmith&#8217; succeeds, the credentials <strong>will be removed from the system <em>immediately</em></strong>.</p>

	<blockquote><span class="label label-info">Info</span> There is no plan at this time to allow for the selection of multiple usernames or the application of a wildcard to remove more than one or all credentials for an account. You should use the &#8216;get&#8217; API call to retrieve a list of your credential usernames and iterate that loop to remove each one individually.</blockquote>
  
    <footer>
      
      
        <div class="sharing">
  
  
  
</div>

      
      
    </footer>
  
</article>


    </div>
  </div>
	<div id="footer">
	<div class="container-fluid footer-links">
	<div class="container">
		<div class="row">
			<div class="span2">
				<h4>Sales</h4>
				<a href="http://sendgrid.com/pricing/">Pricing</a><br/>
				<a href="http://sendgrid.com/features/">Features</a>
			</div>
			<div class="span2">
				<h4>Support</h4>
				<a href="http://support.sendgrid.com/">Contact Support</a><br/>
				<a href="http://docs.sendgrid.com/">Documentation</a><br/>
				<a href="http://sendgrid.com/contact/reportSpam">Report Spam</a>
			</div>
			<div class="span2">
				<h4>Community</h4>
				<a href="http://twitter.com/sendgrid/">Twitter</a><br/>
				<a href="http://community.sendgrid.com/">Forum</a>
			</div>
			<div class="span2">
				<h4>Company</h4>
				<a href="http://http://sendgrid.com/about.html">About</a><br/>
				<a href="http://sendgrid.com/team.html">Our Team</a><br/>
				<a href="http://sendgrid.com/jobs.html">Jobs</a><br/>
				<a href="http://sendgrid.com/press.html">Press</a><br/>
				<a href="http://sendgrid.com/contact.html">Contact Us</a>
			</div>
			<div class="span2">
				<h4>Connect With Us!</h4>
				<a href="http://blog.sendgrid.com/feed/"><img alt="RSS" title="Feed" src="/images/rss.gif"></a> 
		          <a href="http://twitter.com/SendGrid"><img alt="Twitter" title="Twitter" src="/images/twitter.gif"></a> 
		          <a href="http://www.facebook.com/SendGrid"><img alt="Facebook" title="Facebook" src="/images/facebook.gif"></a>

			</div>
		</div>
	</div>
	</div>

	<footer id="bottom-footer">
	<div class="container">
		<div class="row">
			<div class="span5">
	        	<p>&copy; SendGrid 2012</p>
			</div>

			<div class="span7">
				<a href="http://sendgrid.com/tos.html">Terms of Service</a>

				<a href="http://sendgrid.com/tos.html">Email Policy</a>

				<a href="http://sendgrid.com/tos.html">Privacy Policy</a>

				<p class="pull-right"><a href="#">Back to top</a></p>
			</div>
		</div>
	</div> <!-- /container -->
	</footer>
</div>

	<!-- 







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




-->
</body>
</html>
