
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>PHP Email Example Using SMTP - My Octopress Blog</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="PHP Email Example Using SMTP Mar 25th, 2011 This library allows you to quickly and easily send emails through SendGrid using PHP. NOTE >> This &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://yoursite.com/documentation/get-started/integrate/examples/php-email-example-using-smtp">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/bootstrap/bootstrap.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/bootstrap/responsive.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/syntax/syntax.css" media="screen, projection" rel="stylesheet" type="text/css">
  <style type="text/css">
    body {
      padding-bottom: 40px;
    }
    h1 {
      margin-bottom: 15px;
    }
    img {
      max-width: 100%;
    }
    .sharing, .meta, .pager {
      margin: 20px 0px 20px 0px;
    }
    .page-footer p {
      text-align: center;
    }
  </style>
  <script src="/javascripts/libs/jquery.js"></script>
  <script src="/javascripts/libs/modernizr-2.0.js"></script>
  <script src="/javascripts/libs/bootstrap.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="My Octopress Blog" type="application/atom+xml">
  
  

</head>

<body   >
  <nav role="navigation"><div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <a class="brand" href="/">My Octopress Blog</a>

      <div class="nav-collapse">
        <ul class="nav">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>


        <ul class="nav pull-right" data-subscription="rss">
          <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
          
        </ul>

        
          <form class="pull-right navbar-search" action="http://google.com/search" method="get">
            <fieldset role="search">
              <input type="hidden" name="q" value="site:yoursite.com" />
              <input class="search-query" type="text" name="q" results="0" placeholder="Search"/>
            </fieldset>
          </form>
        
      </div>
    </div>
  </div>
</div>
</nav>
  <div class="container">
    <div class="row-fluid">
      
<article role="article" class="span9">

  
  <header class="page-header">
    <h1 class="entry-title">PHP Email Example Using SMTP</h1>
    <p class="meta">








  


<time datetime="2011-03-25T09:50:54-06:00" pubdate data-updated="true">Mar 25<span>th</span>, 2011</time></p>
  </header>
  
  <p>This library allows you to quickly and easily send emails through SendGrid using PHP.</p>

<blockquote><p><strong>NOTE >> </strong>This library is licensed for use under the terms of the MIT license.</p>

<p><strong>NOTE >> </strong>SendGrid requires the use of PHP 5.3 or higher.</p></blockquote>

<h2>How To Install The Libraries</h2>

<p><code>git clone git@github.com:sendgrid/sendgrid-php.git</code></p>

<h2>SendGrid APIs</h2>

<p>SendGrid provides two methods of sending email: the Web API, and SMTP API.  SendGrid recommends using the SMTP API for sending emails. For an explanation of the benefits of each, refer to http://docs.sendgrid.com/documentation/get-started/integrate/examples/smtp-vs-rest/.</p>

<p>This library implements a common interface to make it very easy to use either API.</p>

<h2>Mail Pre-Usage</h2>

<p>Before we begin using the library, its important to understand a few things about the library architecture. First, the SendGrid Mail object is the means of setting mail data. In general, data can be set in following three ways for most elements:</p>

<ul>
<li><p><strong>set</strong> - reset the data, and initialize it to the given element. This will destroy previous data.</p></li>
<li><p><strong>set (List)</strong> - for array based elements, we provide a way of passing the entire array in at once. This will also destroy previous data.</p></li>
<li><p><strong>add</strong> - append data to the list of elements.</p></li>
</ul>


<p>Sending an email is as simple as:</p>

<ol>
<li><p>Creating a SendGrid Instance</p></li>
<li><p>Creating a SendGrid Mail object, and setting its data</p></li>
<li><p>Sending the mail using either SMTP API or Web API.</p></li>
</ol>


<h2>Mail Usage</h2>

<p>To begin using this library, you must first include it in your code, like so:</p>

<p><code>include 'path/to/sendgrid-php/SendGrid_loader.php';</code></p>

<p>Then, initialize the SendGrid object with your SendGrid credentials:</p>

<p><code>$sendgrid = new SendGrid('username', 'password');</code></p>

<p>Create a new SendGrid Mail object and add your message details, as follows:</p>

<p>`$mail = new SendGrid\Mail();
$mail->addTo(&#8216;foo@bar.com&#8217;)-></p>

<pre><code>   setFrom('me@bar.com')-&gt;
   setSubject('Subject goes here')-&gt;
   setText('Hello World!')-&gt;
   setHtml('**Hello World!**');`
</code></pre>

<p>Finally, send it using the API of your choice of SMTP like so:</p>

<p><code>$sendgrid-&gt;smtp-&gt;send($mail);</code>
Or you can send it using the Web API like so:</p>

<p><code>$sendgrid-&gt;web-&gt;send($mail);</code></p>

<h3>Using Categories</h3>

<p>Categories are used to group email statistics provided by SendGrid. To use a category, simply set the category name.</p>

<blockquote><p><strong>NOTE >> </strong>There is a maximum of 10 categories per email.</p></blockquote>

<p>`$mail = new SendGrid\Mail();
$mail->addTo(&#8216;foo@bar.com&#8217;)-></p>

<pre><code>   ...
   addCategory("Category 1")-&gt;
   addCategory("Category 2");`
</code></pre>

<h3>Using Attachments</h3>

<p>Attachments are currently file based only, with future plans for an in memory implementation as well.</p>

<p>File attachments are limited to 7 MB per file.</p>

<p>`$mail = new SendGrid\Mail();
$mail->addTo(&#8216;foo@bar.com&#8217;)-></p>

<pre><code>   ...
   addAttachment("../path/to/file.txt");`
</code></pre>

<h3>Using Substitutions</h3>

<p>Substitutions can be used to customize multi-recipient emails, and tailor them for the user.</p>

<p>`$mail = new SendGrid\Mail();
$mail->addTo(&#8216;john@somewhere.com&#8217;)-></p>

<pre><code>   addTo("harry@somewhere.com")-&gt;
   addTo("Bob@somewhere.com")-&gt;
   ...
   setHtml("Hey %name%, we've seen that you've been gone for a while")-&gt;
   addSubstitution("%name%", array("John", "Harry", "Bob"));`
</code></pre>

<h3>Using Sections</h3>

<p>Sections can be used to further customize messages for the end users. A section is only useful in conjunction with a substition value.</p>

<p>`$mail = new SendGrid\Mail();
$mail->addTo(&#8216;john@somewhere.com&#8217;)-></p>

<pre><code>   addTo("harry@somewhere.com")-&gt;
   addTo("Bob@somewhere.com")-&gt;
   ...
   setHtml("Hey %name%, you work at %place%")-&gt;
   addSubstitution("%name%", array("John", "Harry", "Bob"))-&gt;
   addSubstitution("%place%", array("%office%", "%office%", "%home%"))-&gt;
   addSection("%office%", "an office")-&gt;
   addSection("%home%", "your house");`
</code></pre>

<h3>Using Unique Arguments</h3>

<p>Unique Arguments can be used for tracking purposes and developing data for unique statistical analysis.</p>

<p>`$mail = new SendGrid\Mail();
$mail->addTo(&#8216;foo@bar.com&#8217;)-></p>

<pre><code>   ...
   addUniqueArgument("Customer", "Someone")-&gt;
   addUniqueArgument("location", "Somewhere");`
</code></pre>

<h3>Using Filter Settings</h3>

<p>Filter Settings are used to enable and disable apps, and to pass parameters to those apps.</p>

<p>`$mail = new SendGrid\Mail();
$mail->addTo(&#8216;foo@bar.com&#8217;)-></p>

<pre><code>   ...
   addFilterSetting("gravatar", "enable", 1)-&gt;
   addFilterSetting("footer", "enable", 1)-&gt;
   addFilterSetting("footer", "text/plain", "Here is a plain text footer")-&gt;
   addFilterSetting("footer", "text/html", "
</code></pre>

<p>Here is an HTML footer</p>

<p>&#8221;);`</p>

<h3>Using Headers</h3>

<p>Headers can be used to add existing sendgrid functionality (such as for categories or filters), or custom headers can be added as necessary.</p>

<p>`$mail = new SendGrid\Mail();
$mail->addTo(&#8216;foo@bar.com&#8217;)-></p>

<pre><code>   ...
   addHeader("category", "My New Category");`
</code></pre>

  
    <footer>
      <p class="meta">
        
        








  


<time datetime="2011-03-25T09:50:54-06:00" pubdate data-updated="true">Mar 25<span>th</span>, 2011</time>
        
      </p>
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://yoursite.com/documentation/get-started/integrate/examples/php-email-example-using-smtp/index.html" data-via="" data-counturl="http://yoursite.com/documentation/get-started/integrate/examples/php-email-example-using-smtp/index.html" >Tweet</a>
  
  
  
</div>

      
      
    </footer>
  
</article>

<aside class="sidebar-nav span3">
  
    <section class="well">
  <ul id="recent_posts" class="nav nav-list">
    <li class="nav-header">Recent Posts</li>
    
      <li class="post">
        <a href="/blog/2011/10/06/valid-passwords/">Valid Passwords</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/07/27/billing-error-code/">Billing Error Code</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/27/how-to-eliminate-the-on-behalf-of-message/">How To: Eliminate the On Behalf Of Message</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/27/spf-records-dont-have-more-than-10-dns-lookups/">SPF Records:  Don't have more than 10 DNS lookups!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/21/what-is-throttling/">What is Throttling?</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo" class="page-footer"><hr>
<p>
  Copyright &copy; 2012 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
